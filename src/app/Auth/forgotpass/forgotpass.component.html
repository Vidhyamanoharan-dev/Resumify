<!-- Only shows when modal is visible -->
<div class="modal-backdrop" *ngIf="isModalVisible">
  <div class="modal-container">
    <button class="close-btn" (click)="close()">Ã—</button>

    <div class="modal-content">
      <!-- Left Section: Image -->
      <div class="left-section">
        <img src="/assets/images/resume.jpg" alt="resume image" class="resume-img" />
      </div>

      <!-- Right Section: Form -->
      <div class="right-section">
        <h2 *ngIf="step === 'email'">Reset Your Password</h2>
        <h2 *ngIf="step === 'code'">Enter Verification Code</h2>
        <h2 *ngIf="step === 'reset'">Set New Password</h2>

        <form *ngIf="step === 'email'" [formGroup]="emailForm" (ngSubmit)="sendCode()">
          <label>Email</label>
          <input type="email" formControlName="email" placeholder="Enter your email" />
          <div class="error" *ngIf="email?.touched && email?.invalid">
            <small *ngIf="email?.errors?.['required']">Email is required</small>
            <small *ngIf="email?.errors?.['email']">Invalid email</small>
          </div>
          <button type="submit">Send Code</button>
        </form>

        <form *ngIf="step === 'code'" [formGroup]="codeForm" (ngSubmit)="verifyCode()">
          <label>Verification Code</label>
          <input type="text" formControlName="code" placeholder="6-digit code" />
          <div class="error" *ngIf="codeForm.controls['code'].touched && codeForm.controls['code'].invalid">
            <small *ngIf="codeForm.controls['code'].errors?.['required']">Code is required</small>
          </div>
          <button type="submit">Verify Code</button>
        </form>

        <form *ngIf="step === 'reset'" [formGroup]="passwordForm" (ngSubmit)="resetPassword()">
          <label>New Password</label>
          <input type="password" formControlName="password" placeholder="New password" />
          <label>Confirm Password</label>
          <input type="password" formControlName="confirmPassword" placeholder="Confirm password" />
          <div class="error" *ngIf="passwordForm.touched && passwordForm.invalid">
            <small *ngIf="passwordForm.errors?.['required']">Both fields are required</small>
          </div>
          <button type="submit">Reset Password</button>
        </form>
      </div>
    </div>
  </div>
</div>
